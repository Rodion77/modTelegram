<?xml version="1.0" encoding="UTF-8"?>
<model package="modtelegram" baseClass="xPDOObject" platform="mysql" defaultEngine="MyISAM" phpdoc-package="modtelegram"
	   version="1.1">


	<object class="modTelegramManager" table="modtelegram_managers" extends="xPDOObject">
		<field key="id" dbtype="int" precision="10" phptype="integer" attributes="unsigned" null="false"
			   index="pk"/>
		<field key="telegram_id" dbtype="varchar" precision="255" phptype="string" null="false" default=""
			   index="index"/>
		<field key="chat_id" dbtype="varchar" precision="100" phptype="string" null="false" default="" index="index"/>
		<field key="active" dbtype="tinyint" precision="1" phptype="boolean" attributes="unsigned" null="false"
			   default="1" index="index"/>

		<index alias="id" name="id" primary="false" unique="true" type="BTREE">
			<column key="id" length="" collation="A" null="false"/>
		</index>
		<index alias="telegram_id" name="telegram_id" primary="false" unique="true" type="BTREE">
			<column key="telegram_id" length="" collation="A" null="false"/>
		</index>
		<index alias="chat_id" name="chat_id" primary="false" unique="true" type="BTREE">
			<column key="chat_id" length="" collation="A" null="false"/>
		</index>
		<index alias="active" name="active" primary="false" unique="false" type="BTREE">
			<column key="active" length="" collation="A" null="false"/>
		</index>

		<composite alias="Chats" class="modTelegramChat" local="id" foreign="manager_id" cardinality="many"
				   owner="local"/>
		<composite alias="ActiveChat" class="modTelegramChat" local="chat_id" foreign="chat_id" cardinality="one"
				   owner="local"/>
		<aggregate alias="User" class="modUser" local="id" foreign="id" owner="foreign" cardinality="one"/>

	</object>


	<object class="modTelegramChat" table="modtelegram_chats" extends="xPDOSimpleObject">
		<field key="chat_id" dbtype="varchar" precision="100" phptype="string" null="false" default=""/>
		<field key="manager_id" dbtype="int" precision="10" phptype="integer" attributes="unsigned" null="false"
			   default="0"/>

		<index alias="chat" name="chat" primary="false" unique="true" type="BTREE">
			<column key="chat_id" length="" collation="A" null="false"/>
			<column key="manager_id" length="" collation="A" null="false"/>
		</index>

		<aggregate alias="Manager" class="modTelegramManager" local="manager_id" foreign="id" cardinality="one"
				   owner="foreign"/>
		<aggregate alias="User" class="modUser" local="manager_id" foreign="id" owner="foreign" cardinality="one"/>

	</object>


	<object class="modTelegramMessage" table="modtelegram_messages" extends="xPDOSimpleObject">
		<field key="chat_id" dbtype="varchar" precision="255" phptype="string" null="false" default=""/>
		<field key="sender_id" dbtype="varchar" precision="255" phptype="string" null="false" default=""/>
		<field key="message_id" dbtype="int" precision="10" phptype="integer" attributes="unsigned" null="false"
			   default="0"/>
		<field key="message" dbtype="text" phptype="string" null="false" default=""/>
		<field key="timestamp" dbtype="timestamp" phptype="datetime" null="false" default="CURRENT_TIMESTAMP"/>

		<index alias="chat_id" name="chat_id" primary="false" unique="false" type="BTREE">
			<column key="chat_id" length="" collation="A" null="false"/>
		</index>
		<index alias="sender_id" name="sender_id" primary="false" unique="false" type="BTREE">
			<column key="sender_id" length="" collation="A" null="false"/>
		</index>
		<index alias="message_id" name="message_id" primary="false" unique="false" type="BTREE">
			<column key="message_id" length="" collation="A" null="false"/>
		</index>
		<index alias="timestamp" name="timestamp" primary="false" unique="false" type="BTREE">
			<column key="timestamp" length="" collation="A" null="false"/>
		</index>


	</object>


</model>